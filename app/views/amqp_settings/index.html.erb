<h1>AMQP Settings</h1>
<div class="description">Configure on which exchanges your <span class="highlighted">graylog2-server</span> instances should listen for which message types. Make sure that you have enabled AMQP in <span class="highlighted">graylog2.conf</span> if you want to use it. The servers will declare temporary queues on those exchanges and handle every message on them. If you have multiple <span class="highlighted">graylog2-server</span> nodes, all of them will connect to the same queues to share the load. You can use wildcards in the routing key if your broker supports it.</div>

SEE THE HEALTH PAGE FOR LE CURRENT QUEUE SETTINGS ET LE ACTIVITY MESSAGES. zomg ALSO LINK TO NEW DOCS.

<h2>Add new AMQP configuration</h2>
<%= form_for(@amqp_configuration, :url => amqp_settings_path) do |f| %>
	<%= f.label :exchange, "Exchange:" %>
	<%= f.text_field :exchange %>

	&nbsp;
	<%= f.label :routing_key, "Routing key:" %>
	<%= f.text_field :routing_key %>

	&nbsp;
	<%= f.label :ttl, "TTL:" %>
	<%= f.text_field :ttl, :value => "900000", :size => 8 %>
	&nbsp;
	<%= f.label :input_type, "Type:" %>
	<%= f.select :input_type, [ ["GELF", :gelf ], :syslog ] %>

	&nbsp;
	<%= awesome_submit_link "Add" %>
<% end %>

<br />
<table class="messages">
	<thead>
		<tr>
			<th>Exchange</th>
			<th>Routing key</th>
			<th>TTL</th>
			<th>Type</th>
			<th>Created</th>
		</tr>
	</thead>

	<tbody>
		<% @amqp_configurations.each do |config| %>
			<tr>
				<td><%= config.exchange %></td>
				<td><%= config.routing_key %></td>
				<td><%= config.ttl %></td>
				<td><%= config.input_type %></td>
				<td><%= gl_date(config.created_at) %></td>
			</tr>
		<% end %>
	</tbody>

</table>