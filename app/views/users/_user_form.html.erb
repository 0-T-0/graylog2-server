<%= error_messages_for :user %>
<% form_for :user, :url => { :action => form_action, :id => @user.id } do |f| -%>

<dl id="users-form">
  <dt><%= label_tag 'login', "Username" %></dt>
  <dd><%= f.text_field :login %></dd>

  <dt><%= label_tag 'email' %></dt>
  <dd><%= f.text_field :email %></dd>

  <dt><%= label_tag 'password' %></dt>
  <dd><%= f.password_field :password %></dd>

  <dt><%= label_tag 'password_confirmation', 'Confirm Password' %></dt>
  <dd><%= f.password_field :password_confirmation %></dd>

  <dt><%= label_tag 'role', 'Rolle'%></dt>
  <dd><%= f.select(:role, user.valid_roles.collect {|r| [r.to_s.capitalize, r.to_s]})%></dd>

  <dt><%= label_tag 'streams', 'Streams' %></dt>
  <dd><% Stream.all.each do |stream| %>
      <%= check_box_tag "user[stream_ids][]", stream.id, user.streams.include?(stream) -%><%= stream.title -%>
      <% end %></dd>

  <dt>&nbsp;</dt>
  <dd><%= submit_tag "#{form_action.capitalize} user" %></dd>
</dl>
<% end -%>
</div>
