@(currentUser: User, breadcrumbs: lib.BreadcrumbList, loggers: Map[Node, List[InternalLogger]])

@main("Logging", views.html.system.sidebar(), "", currentUser) {

    @views.html.partials.breadcrumbs(breadcrumbs)

    <div class="row-fluid">
        <h1><i class="icon icon-inbox"></i> Logging</h1>
        This section controls logging of the Graylog2 architecture. View logs generated by the system
        and change log levels here.
    </div>

    <h2><i class="icon icon-cloud"></i> Log writing nodes</h2>
    @for((node, nodeLoggers) <- loggers) {
        <div class="row-fluid log-writing-node node-row">

            <h3>
                @views.html.partials.node_title_link(node)
            </h3>

            <div class="pull-right">
                <a href="#" class="btn btn-mini trigger-fine-log-level-controls" data-node-id="@node.getNodeId">
                    <i class="icon icon-sort-by-alphabet"></i>
                    Fine grained log level control
                </a>
            </div>

            Has written a total of
            <strong>
                <span class="total-logs" data-node-id="@node.getNodeId">9001</span>
                internal log messages.
            </strong>

            <div class="fine-log-level-controls" style="display: none;" data-node-id="@node.getNodeId">
                <dl>
                    <dt>
                        <label>
                            <input type="checkbox" class="select-all" data-node-id="@node.getNodeId"/>
                            Select all
                        </label>
                    </dt>
                    <dd>&nbsp;</dd>

                    @for(logger <- nodeLoggers.sortBy(_.getTitle)) {
                        <dt>
                            <label>
                                <input type="checkbox" value="@logger.getTitle" data-node-id="@node.getNodeId" />
                                @logger.getLevel.toUpperCase
                            </label>
                        </dt>
                        <dd>@logger.getTitle</dd>
                    }
                </dl>
            </div>
        </div>
    }
}