<% minutes = params[:ms].blank? ? 15 : params[:ms].to_i %>

<div id="streams-stream">
  <div class="streams-stream-left">
    <span class="streams-stream-sparkline">
      <%= sparkline_values(MessageCount.counts_of_last_minutes(minutes, :stream_id => stream.id).map { |c| c[:count] }) %>
    </span>
  </div>

  <div class="streams-stream-middle">
    <span class="streams-stream-title <%= "streams-stream-title-disabled" if stream.disabled %>">
      <% stream.alarm_status(current_user) == :alarm ? alarm_class = "status-alarm-text" : alarm_class = nil %>

      <%= link_to(stream.title_possibly_disabled, stream_messages_path(stream), :class => alarm_class) %>
    </span>
  </div>

  <div class="streams-stream-right">
    <span class="streams-stream-description"><%= stream.description.blank? ? "No description" : stream.description %></span>
  </div>
</div>
