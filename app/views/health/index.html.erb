<h1>Health of <span class="highlighted">graylog2-server-<%= ServerValue.graylog2_version %></span> on <span class="highlighted"><%= ServerValue.local_hostname %></span></h1>

<div id="health-throughput">
  <span class="health-throughput-title">Throughput:</span>

  <span id="health-throughput-current">
    <%= ServerValue.throughput[:current] %>
  </span>
  <span class="health-throughput-label">Current</span>

  &nbsp;

  <span id="health-throughput-highest"><%= ServerValue.throughput[:highest] %></span>
  <span class="health-throughput-label">Highest</span>

  &nbsp;

  <span class="health-throughput-explanation">(messages / 5 seconds)</span>
</div>

<br />
<h3><span class="highlighted">Started:</span> <%= gl_date(Time.at(ServerValue.startup_time)) rescue "?" %></h3>
<h3><span class="highlighted">Available processors:</span> <%= ServerValue.available_processors %></h3>
<h3><span class="highlighted">JRE:</span> <%= ServerValue.jre %></h3>
<h3><span class="highlighted">PID:</span> <%= ServerValue.pid %></h3>

<script type="text/javascript">
  // Update current throughput every seconds
  setInterval(function(){
    $.post("/health/currentthroughput", function(data) {
      json = eval('(' + data + ')');
      count = $("#health-throughput-current");
      count.html(json.count);
      count.fadeOut(200, function() {
        count.fadeIn(200);
      });
    });
  }, 5000);
</script>
